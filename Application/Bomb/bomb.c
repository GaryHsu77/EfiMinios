#include <includes.h>

#define DEBUG_BOMB 1

const UINT8 BombBomb[]={
0x42, 0x4D, 0x76, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x36, 0x4, 0x0, 0x0, 0x28, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x1, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x80, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x80, 0x0, 0x0, 0xC0, 0xC0, 0xC0, 0x0, 0xC0, 0xDC, 0xC0, 0x0, 0xF0, 0xCA, 0xA6, 0x0, 0x0, 0x20, 0x40, 0x0, 0x0, 0x20, 0x60, 0x0, 0x0, 0x20, 0x80, 0x0, 0x0, 0x20, 0xA0, 0x0, 0x0, 0x20, 0xC0, 0x0, 0x0, 0x20, 0xE0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x60, 0x0, 0x0, 0x0, 0x60, 0x20, 0x0, 0x0, 0x60, 0x40, 0x0, 0x0, 0x60, 0x60, 0x0, 0x0, 0x60, 0x80, 0x0, 0x0, 0x60, 0xA0, 0x0, 0x0, 0x60, 0xC0, 0x0, 0x0, 0x60, 0xE0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0xA0, 0x0, 0x0, 0x0, 0xA0, 0x20, 0x0, 0x0, 0xA0, 0x40, 0x0, 0x0, 0xA0, 0x60, 0x0, 0x0, 0xA0, 0x80, 0x0, 0x0, 0xA0, 0xA0, 0x0, 0x0, 0xA0, 0xC0, 0x0, 0x0, 0xA0, 0xE0, 0x0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xE0, 0x0, 0x0, 0xE0, 0x0, 0x0, 0x0, 0xE0, 0x20, 0x0, 0x0, 0xE0, 0x40, 0x0, 0x0, 0xE0, 0x60, 0x0, 0x0, 0xE0, 0x80, 0x0, 0x0, 0xE0, 0xA0, 0x0, 0x0, 0xE0, 0xC0, 0x0, 0x0, 0xE0, 0xE0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x0, 0x20, 0x0, 0x40, 0x0, 0x40, 0x0, 0x40, 0x0, 0x60, 0x0, 0x40, 0x0, 0x80, 0x0, 0x40, 0x0, 0xA0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xE0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x20, 0x20, 0x0, 0x40, 0x20, 0x40, 0x0, 0x40, 0x20, 0x60, 0x0, 0x40, 0x20, 0x80, 0x0, 0x40, 0x20, 0xA0, 0x0, 0x40, 0x20, 0xC0, 0x0, 0x40, 0x20, 0xE0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x40, 0x20, 0x0, 0x40, 0x40, 0x40, 0x0, 0x40, 0x40, 0x60, 0x0, 0x40, 0x40, 0x80, 0x0, 0x40, 0x40, 0xA0, 0x0, 0x40, 0x40, 0xC0, 0x0, 0x40, 0x40, 0xE0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x60, 0x20, 0x0, 0x40, 0x60, 0x40, 0x0, 0x40, 0x60, 0x60, 0x0, 0x40, 0x60, 0x80, 0x0, 0x40, 0x60, 0xA0, 0x0, 0x40, 0x60, 0xC0, 0x0, 0x40, 0x60, 0xE0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0x80, 0x20, 0x0, 0x40, 0x80, 0x40, 0x0, 0x40, 0x80, 0x60, 0x0, 0x40, 0x80, 0x80, 0x0, 0x40, 0x80, 0xA0, 0x0, 0x40, 0x80, 0xC0, 0x0, 0x40, 0x80, 0xE0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xA0, 0x20, 0x0, 0x40, 0xA0, 0x40, 0x0, 0x40, 0xA0, 0x60, 0x0, 0x40, 0xA0, 0x80, 0x0, 0x40, 0xA0, 0xA0, 0x0, 0x40, 0xA0, 0xC0, 0x0, 0x40, 0xA0, 0xE0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xC0, 0x20, 0x0, 0x40, 0xC0, 0x40, 0x0, 0x40, 0xC0, 0x60, 0x0, 0x40, 0xC0, 0x80, 0x0, 0x40, 0xC0, 0xA0, 0x0, 0x40, 0xC0, 0xC0, 0x0, 0x40, 0xC0, 0xE0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x40, 0xE0, 0x20, 0x0, 0x40, 0xE0, 0x40, 0x0, 0x40, 0xE0, 0x60, 0x0, 0x40, 0xE0, 0x80, 0x0, 0x40, 0xE0, 0xA0, 0x0, 0x40, 0xE0, 0xC0, 0x0, 0x40, 0xE0, 0xE0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x20, 0x0, 0x80, 0x0, 0x40, 0x0, 0x80, 0x0, 0x60, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x0, 0xA0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xE0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x20, 0x20, 0x0, 0x80, 0x20, 0x40, 0x0, 0x80, 0x20, 0x60, 0x0, 0x80, 0x20, 0x80, 0x0, 0x80, 0x20, 0xA0, 0x0, 0x80, 0x20, 0xC0, 0x0, 0x80, 0x20, 0xE0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x40, 0x20, 0x0, 0x80, 0x40, 0x40, 0x0, 0x80, 0x40, 0x60, 0x0, 0x80, 0x40, 0x80, 0x0, 0x80, 0x40, 0xA0, 0x0, 0x80, 0x40, 0xC0, 0x0, 0x80, 0x40, 0xE0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x60, 0x20, 0x0, 0x80, 0x60, 0x40, 0x0, 0x80, 0x60, 0x60, 0x0, 0x80, 0x60, 0x80, 0x0, 0x80, 0x60, 0xA0, 0x0, 0x80, 0x60, 0xC0, 0x0, 0x80, 0x60, 0xE0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0x80, 0x20, 0x0, 0x80, 0x80, 0x40, 0x0, 0x80, 0x80, 0x60, 0x0, 0x80, 0x80, 0x80, 0x0, 0x80, 0x80, 0xA0, 0x0, 0x80, 0x80, 0xC0, 0x0, 0x80, 0x80, 0xE0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xA0, 0x20, 0x0, 0x80, 0xA0, 0x40, 0x0, 0x80, 0xA0, 0x60, 0x0, 0x80, 0xA0, 0x80, 0x0, 0x80, 0xA0, 0xA0, 0x0, 0x80, 0xA0, 0xC0, 0x0, 0x80, 0xA0, 0xE0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xC0, 0x20, 0x0, 0x80, 0xC0, 0x40, 0x0, 0x80, 0xC0, 0x60, 0x0, 0x80, 0xC0, 0x80, 0x0, 0x80, 0xC0, 0xA0, 0x0, 0x80, 0xC0, 0xC0, 0x0, 0x80, 0xC0, 0xE0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0x80, 0xE0, 0x20, 0x0, 0x80, 0xE0, 0x40, 0x0, 0x80, 0xE0, 0x60, 0x0, 0x80, 0xE0, 0x80, 0x0, 0x80, 0xE0, 0xA0, 0x0, 0x80, 0xE0, 0xC0, 0x0, 0x80, 0xE0, 0xE0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x0, 0x20, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x60, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0xA0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xE0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x20, 0x20, 0x0, 0xC0, 0x20, 0x40, 0x0, 0xC0, 0x20, 0x60, 0x0, 0xC0, 0x20, 0x80, 0x0, 0xC0, 0x20, 0xA0, 0x0, 0xC0, 0x20, 0xC0, 0x0, 0xC0, 0x20, 0xE0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x40, 0x20, 0x0, 0xC0, 0x40, 0x40, 0x0, 0xC0, 0x40, 0x60, 0x0, 0xC0, 0x40, 0x80, 0x0, 0xC0, 0x40, 0xA0, 0x0, 0xC0, 0x40, 0xC0, 0x0, 0xC0, 0x40, 0xE0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x60, 0x20, 0x0, 0xC0, 0x60, 0x40, 0x0, 0xC0, 0x60, 0x60, 0x0, 0xC0, 0x60, 0x80, 0x0, 0xC0, 0x60, 0xA0, 0x0, 0xC0, 0x60, 0xC0, 0x0, 0xC0, 0x60, 0xE0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0x80, 0x20, 0x0, 0xC0, 0x80, 0x40, 0x0, 0xC0, 0x80, 0x60, 0x0, 0xC0, 0x80, 0x80, 0x0, 0xC0, 0x80, 0xA0, 0x0, 0xC0, 0x80, 0xC0, 0x0, 0xC0, 0x80, 0xE0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xA0, 0x20, 0x0, 0xC0, 0xA0, 0x40, 0x0, 0xC0, 0xA0, 0x60, 0x0, 0xC0, 0xA0, 0x80, 0x0, 0xC0, 0xA0, 0xA0, 0x0, 0xC0, 0xA0, 0xC0, 0x0, 0xC0, 0xA0, 0xE0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xC0, 0x20, 0x0, 0xC0, 0xC0, 0x40, 0x0, 0xC0, 0xC0, 0x60, 0x0, 0xC0, 0xC0, 0x80, 0x0, 0xC0, 0xC0, 0xA0, 0x0, 0xF0, 0xFB, 0xFF, 0x0, 0xA4, 0xA0, 0xA0, 0x0, 0x80, 0x80, 0x80, 0x0, 0x0, 0x0, 0xFF, 0x0, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0xFF, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0x0, 0xFF, 0x0, 0xFF, 0xFF, 0x0, 0x0, 0xFF, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x67, 0x67, 0x67, 0x0, 0x0, 0x0, 0x0, 0x67, 0x67, 0x67, 0x67, 0x67, 0x0, 0x0, 0x0, 0x67, 0x67, 0x67, 0x67, 0x67, 0x0, 0x0, 0x0, 0x67, 0x67, 0x67, 0x67, 0x67, 0x0, 0x0, 0x0, 0xA4, 0x67, 0x67, 0x67, 0x0, 0x0, 0x4F, 0xA4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 
};

const UINT8 BombExplore[]={
0x42, 0x4D, 0x76, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x36, 0x4, 0x0, 0x0, 0x28, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x1, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x80, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x80, 0x0, 0x0, 0xC0, 0xC0, 0xC0, 0x0, 0xC0, 0xDC, 0xC0, 0x0, 0xF0, 0xCA, 0xA6, 0x0, 0x0, 0x20, 0x40, 0x0, 0x0, 0x20, 0x60, 0x0, 0x0, 0x20, 0x80, 0x0, 0x0, 0x20, 0xA0, 0x0, 0x0, 0x20, 0xC0, 0x0, 0x0, 0x20, 0xE0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x60, 0x0, 0x0, 0x0, 0x60, 0x20, 0x0, 0x0, 0x60, 0x40, 0x0, 0x0, 0x60, 0x60, 0x0, 0x0, 0x60, 0x80, 0x0, 0x0, 0x60, 0xA0, 0x0, 0x0, 0x60, 0xC0, 0x0, 0x0, 0x60, 0xE0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0xA0, 0x0, 0x0, 0x0, 0xA0, 0x20, 0x0, 0x0, 0xA0, 0x40, 0x0, 0x0, 0xA0, 0x60, 0x0, 0x0, 0xA0, 0x80, 0x0, 0x0, 0xA0, 0xA0, 0x0, 0x0, 0xA0, 0xC0, 0x0, 0x0, 0xA0, 0xE0, 0x0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xE0, 0x0, 0x0, 0xE0, 0x0, 0x0, 0x0, 0xE0, 0x20, 0x0, 0x0, 0xE0, 0x40, 0x0, 0x0, 0xE0, 0x60, 0x0, 0x0, 0xE0, 0x80, 0x0, 0x0, 0xE0, 0xA0, 0x0, 0x0, 0xE0, 0xC0, 0x0, 0x0, 0xE0, 0xE0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x0, 0x20, 0x0, 0x40, 0x0, 0x40, 0x0, 0x40, 0x0, 0x60, 0x0, 0x40, 0x0, 0x80, 0x0, 0x40, 0x0, 0xA0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xE0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x20, 0x20, 0x0, 0x40, 0x20, 0x40, 0x0, 0x40, 0x20, 0x60, 0x0, 0x40, 0x20, 0x80, 0x0, 0x40, 0x20, 0xA0, 0x0, 0x40, 0x20, 0xC0, 0x0, 0x40, 0x20, 0xE0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x40, 0x20, 0x0, 0x40, 0x40, 0x40, 0x0, 0x40, 0x40, 0x60, 0x0, 0x40, 0x40, 0x80, 0x0, 0x40, 0x40, 0xA0, 0x0, 0x40, 0x40, 0xC0, 0x0, 0x40, 0x40, 0xE0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x60, 0x20, 0x0, 0x40, 0x60, 0x40, 0x0, 0x40, 0x60, 0x60, 0x0, 0x40, 0x60, 0x80, 0x0, 0x40, 0x60, 0xA0, 0x0, 0x40, 0x60, 0xC0, 0x0, 0x40, 0x60, 0xE0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0x80, 0x20, 0x0, 0x40, 0x80, 0x40, 0x0, 0x40, 0x80, 0x60, 0x0, 0x40, 0x80, 0x80, 0x0, 0x40, 0x80, 0xA0, 0x0, 0x40, 0x80, 0xC0, 0x0, 0x40, 0x80, 0xE0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xA0, 0x20, 0x0, 0x40, 0xA0, 0x40, 0x0, 0x40, 0xA0, 0x60, 0x0, 0x40, 0xA0, 0x80, 0x0, 0x40, 0xA0, 0xA0, 0x0, 0x40, 0xA0, 0xC0, 0x0, 0x40, 0xA0, 0xE0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xC0, 0x20, 0x0, 0x40, 0xC0, 0x40, 0x0, 0x40, 0xC0, 0x60, 0x0, 0x40, 0xC0, 0x80, 0x0, 0x40, 0xC0, 0xA0, 0x0, 0x40, 0xC0, 0xC0, 0x0, 0x40, 0xC0, 0xE0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x40, 0xE0, 0x20, 0x0, 0x40, 0xE0, 0x40, 0x0, 0x40, 0xE0, 0x60, 0x0, 0x40, 0xE0, 0x80, 0x0, 0x40, 0xE0, 0xA0, 0x0, 0x40, 0xE0, 0xC0, 0x0, 0x40, 0xE0, 0xE0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x20, 0x0, 0x80, 0x0, 0x40, 0x0, 0x80, 0x0, 0x60, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x0, 0xA0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xE0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x20, 0x20, 0x0, 0x80, 0x20, 0x40, 0x0, 0x80, 0x20, 0x60, 0x0, 0x80, 0x20, 0x80, 0x0, 0x80, 0x20, 0xA0, 0x0, 0x80, 0x20, 0xC0, 0x0, 0x80, 0x20, 0xE0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x40, 0x20, 0x0, 0x80, 0x40, 0x40, 0x0, 0x80, 0x40, 0x60, 0x0, 0x80, 0x40, 0x80, 0x0, 0x80, 0x40, 0xA0, 0x0, 0x80, 0x40, 0xC0, 0x0, 0x80, 0x40, 0xE0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x60, 0x20, 0x0, 0x80, 0x60, 0x40, 0x0, 0x80, 0x60, 0x60, 0x0, 0x80, 0x60, 0x80, 0x0, 0x80, 0x60, 0xA0, 0x0, 0x80, 0x60, 0xC0, 0x0, 0x80, 0x60, 0xE0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0x80, 0x20, 0x0, 0x80, 0x80, 0x40, 0x0, 0x80, 0x80, 0x60, 0x0, 0x80, 0x80, 0x80, 0x0, 0x80, 0x80, 0xA0, 0x0, 0x80, 0x80, 0xC0, 0x0, 0x80, 0x80, 0xE0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xA0, 0x20, 0x0, 0x80, 0xA0, 0x40, 0x0, 0x80, 0xA0, 0x60, 0x0, 0x80, 0xA0, 0x80, 0x0, 0x80, 0xA0, 0xA0, 0x0, 0x80, 0xA0, 0xC0, 0x0, 0x80, 0xA0, 0xE0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xC0, 0x20, 0x0, 0x80, 0xC0, 0x40, 0x0, 0x80, 0xC0, 0x60, 0x0, 0x80, 0xC0, 0x80, 0x0, 0x80, 0xC0, 0xA0, 0x0, 0x80, 0xC0, 0xC0, 0x0, 0x80, 0xC0, 0xE0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0x80, 0xE0, 0x20, 0x0, 0x80, 0xE0, 0x40, 0x0, 0x80, 0xE0, 0x60, 0x0, 0x80, 0xE0, 0x80, 0x0, 0x80, 0xE0, 0xA0, 0x0, 0x80, 0xE0, 0xC0, 0x0, 0x80, 0xE0, 0xE0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x0, 0x20, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x60, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0xA0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xE0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x20, 0x20, 0x0, 0xC0, 0x20, 0x40, 0x0, 0xC0, 0x20, 0x60, 0x0, 0xC0, 0x20, 0x80, 0x0, 0xC0, 0x20, 0xA0, 0x0, 0xC0, 0x20, 0xC0, 0x0, 0xC0, 0x20, 0xE0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x40, 0x20, 0x0, 0xC0, 0x40, 0x40, 0x0, 0xC0, 0x40, 0x60, 0x0, 0xC0, 0x40, 0x80, 0x0, 0xC0, 0x40, 0xA0, 0x0, 0xC0, 0x40, 0xC0, 0x0, 0xC0, 0x40, 0xE0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x60, 0x20, 0x0, 0xC0, 0x60, 0x40, 0x0, 0xC0, 0x60, 0x60, 0x0, 0xC0, 0x60, 0x80, 0x0, 0xC0, 0x60, 0xA0, 0x0, 0xC0, 0x60, 0xC0, 0x0, 0xC0, 0x60, 0xE0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0x80, 0x20, 0x0, 0xC0, 0x80, 0x40, 0x0, 0xC0, 0x80, 0x60, 0x0, 0xC0, 0x80, 0x80, 0x0, 0xC0, 0x80, 0xA0, 0x0, 0xC0, 0x80, 0xC0, 0x0, 0xC0, 0x80, 0xE0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xA0, 0x20, 0x0, 0xC0, 0xA0, 0x40, 0x0, 0xC0, 0xA0, 0x60, 0x0, 0xC0, 0xA0, 0x80, 0x0, 0xC0, 0xA0, 0xA0, 0x0, 0xC0, 0xA0, 0xC0, 0x0, 0xC0, 0xA0, 0xE0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xC0, 0x20, 0x0, 0xC0, 0xC0, 0x40, 0x0, 0xC0, 0xC0, 0x60, 0x0, 0xC0, 0xC0, 0x80, 0x0, 0xC0, 0xC0, 0xA0, 0x0, 0xF0, 0xFB, 0xFF, 0x0, 0xA4, 0xA0, 0xA0, 0x0, 0x80, 0x80, 0x80, 0x0, 0x0, 0x0, 0xFF, 0x0, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0xFF, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0x0, 0xFF, 0x0, 0xFF, 0xFF, 0x0, 0x0, 0xFF, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x0, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4F, 0x0, 0x0, 0x0, 0x0, 
};

const UINT8 BombFlag[]={
0x42, 0x4D, 0x76, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x36, 0x4, 0x0, 0x0, 0x28, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x1, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x80, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x80, 0x0, 0x0, 0xC0, 0xC0, 0xC0, 0x0, 0xC0, 0xDC, 0xC0, 0x0, 0xF0, 0xCA, 0xA6, 0x0, 0x0, 0x20, 0x40, 0x0, 0x0, 0x20, 0x60, 0x0, 0x0, 0x20, 0x80, 0x0, 0x0, 0x20, 0xA0, 0x0, 0x0, 0x20, 0xC0, 0x0, 0x0, 0x20, 0xE0, 0x0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x60, 0x0, 0x0, 0x0, 0x60, 0x20, 0x0, 0x0, 0x60, 0x40, 0x0, 0x0, 0x60, 0x60, 0x0, 0x0, 0x60, 0x80, 0x0, 0x0, 0x60, 0xA0, 0x0, 0x0, 0x60, 0xC0, 0x0, 0x0, 0x60, 0xE0, 0x0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0xA0, 0x0, 0x0, 0x0, 0xA0, 0x20, 0x0, 0x0, 0xA0, 0x40, 0x0, 0x0, 0xA0, 0x60, 0x0, 0x0, 0xA0, 0x80, 0x0, 0x0, 0xA0, 0xA0, 0x0, 0x0, 0xA0, 0xC0, 0x0, 0x0, 0xA0, 0xE0, 0x0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xE0, 0x0, 0x0, 0xE0, 0x0, 0x0, 0x0, 0xE0, 0x20, 0x0, 0x0, 0xE0, 0x40, 0x0, 0x0, 0xE0, 0x60, 0x0, 0x0, 0xE0, 0x80, 0x0, 0x0, 0xE0, 0xA0, 0x0, 0x0, 0xE0, 0xC0, 0x0, 0x0, 0xE0, 0xE0, 0x0, 0x40, 0x0, 0x0, 0x0, 0x40, 0x0, 0x20, 0x0, 0x40, 0x0, 0x40, 0x0, 0x40, 0x0, 0x60, 0x0, 0x40, 0x0, 0x80, 0x0, 0x40, 0x0, 0xA0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xE0, 0x0, 0x40, 0x20, 0x0, 0x0, 0x40, 0x20, 0x20, 0x0, 0x40, 0x20, 0x40, 0x0, 0x40, 0x20, 0x60, 0x0, 0x40, 0x20, 0x80, 0x0, 0x40, 0x20, 0xA0, 0x0, 0x40, 0x20, 0xC0, 0x0, 0x40, 0x20, 0xE0, 0x0, 0x40, 0x40, 0x0, 0x0, 0x40, 0x40, 0x20, 0x0, 0x40, 0x40, 0x40, 0x0, 0x40, 0x40, 0x60, 0x0, 0x40, 0x40, 0x80, 0x0, 0x40, 0x40, 0xA0, 0x0, 0x40, 0x40, 0xC0, 0x0, 0x40, 0x40, 0xE0, 0x0, 0x40, 0x60, 0x0, 0x0, 0x40, 0x60, 0x20, 0x0, 0x40, 0x60, 0x40, 0x0, 0x40, 0x60, 0x60, 0x0, 0x40, 0x60, 0x80, 0x0, 0x40, 0x60, 0xA0, 0x0, 0x40, 0x60, 0xC0, 0x0, 0x40, 0x60, 0xE0, 0x0, 0x40, 0x80, 0x0, 0x0, 0x40, 0x80, 0x20, 0x0, 0x40, 0x80, 0x40, 0x0, 0x40, 0x80, 0x60, 0x0, 0x40, 0x80, 0x80, 0x0, 0x40, 0x80, 0xA0, 0x0, 0x40, 0x80, 0xC0, 0x0, 0x40, 0x80, 0xE0, 0x0, 0x40, 0xA0, 0x0, 0x0, 0x40, 0xA0, 0x20, 0x0, 0x40, 0xA0, 0x40, 0x0, 0x40, 0xA0, 0x60, 0x0, 0x40, 0xA0, 0x80, 0x0, 0x40, 0xA0, 0xA0, 0x0, 0x40, 0xA0, 0xC0, 0x0, 0x40, 0xA0, 0xE0, 0x0, 0x40, 0xC0, 0x0, 0x0, 0x40, 0xC0, 0x20, 0x0, 0x40, 0xC0, 0x40, 0x0, 0x40, 0xC0, 0x60, 0x0, 0x40, 0xC0, 0x80, 0x0, 0x40, 0xC0, 0xA0, 0x0, 0x40, 0xC0, 0xC0, 0x0, 0x40, 0xC0, 0xE0, 0x0, 0x40, 0xE0, 0x0, 0x0, 0x40, 0xE0, 0x20, 0x0, 0x40, 0xE0, 0x40, 0x0, 0x40, 0xE0, 0x60, 0x0, 0x40, 0xE0, 0x80, 0x0, 0x40, 0xE0, 0xA0, 0x0, 0x40, 0xE0, 0xC0, 0x0, 0x40, 0xE0, 0xE0, 0x0, 0x80, 0x0, 0x0, 0x0, 0x80, 0x0, 0x20, 0x0, 0x80, 0x0, 0x40, 0x0, 0x80, 0x0, 0x60, 0x0, 0x80, 0x0, 0x80, 0x0, 0x80, 0x0, 0xA0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xE0, 0x0, 0x80, 0x20, 0x0, 0x0, 0x80, 0x20, 0x20, 0x0, 0x80, 0x20, 0x40, 0x0, 0x80, 0x20, 0x60, 0x0, 0x80, 0x20, 0x80, 0x0, 0x80, 0x20, 0xA0, 0x0, 0x80, 0x20, 0xC0, 0x0, 0x80, 0x20, 0xE0, 0x0, 0x80, 0x40, 0x0, 0x0, 0x80, 0x40, 0x20, 0x0, 0x80, 0x40, 0x40, 0x0, 0x80, 0x40, 0x60, 0x0, 0x80, 0x40, 0x80, 0x0, 0x80, 0x40, 0xA0, 0x0, 0x80, 0x40, 0xC0, 0x0, 0x80, 0x40, 0xE0, 0x0, 0x80, 0x60, 0x0, 0x0, 0x80, 0x60, 0x20, 0x0, 0x80, 0x60, 0x40, 0x0, 0x80, 0x60, 0x60, 0x0, 0x80, 0x60, 0x80, 0x0, 0x80, 0x60, 0xA0, 0x0, 0x80, 0x60, 0xC0, 0x0, 0x80, 0x60, 0xE0, 0x0, 0x80, 0x80, 0x0, 0x0, 0x80, 0x80, 0x20, 0x0, 0x80, 0x80, 0x40, 0x0, 0x80, 0x80, 0x60, 0x0, 0x80, 0x80, 0x80, 0x0, 0x80, 0x80, 0xA0, 0x0, 0x80, 0x80, 0xC0, 0x0, 0x80, 0x80, 0xE0, 0x0, 0x80, 0xA0, 0x0, 0x0, 0x80, 0xA0, 0x20, 0x0, 0x80, 0xA0, 0x40, 0x0, 0x80, 0xA0, 0x60, 0x0, 0x80, 0xA0, 0x80, 0x0, 0x80, 0xA0, 0xA0, 0x0, 0x80, 0xA0, 0xC0, 0x0, 0x80, 0xA0, 0xE0, 0x0, 0x80, 0xC0, 0x0, 0x0, 0x80, 0xC0, 0x20, 0x0, 0x80, 0xC0, 0x40, 0x0, 0x80, 0xC0, 0x60, 0x0, 0x80, 0xC0, 0x80, 0x0, 0x80, 0xC0, 0xA0, 0x0, 0x80, 0xC0, 0xC0, 0x0, 0x80, 0xC0, 0xE0, 0x0, 0x80, 0xE0, 0x0, 0x0, 0x80, 0xE0, 0x20, 0x0, 0x80, 0xE0, 0x40, 0x0, 0x80, 0xE0, 0x60, 0x0, 0x80, 0xE0, 0x80, 0x0, 0x80, 0xE0, 0xA0, 0x0, 0x80, 0xE0, 0xC0, 0x0, 0x80, 0xE0, 0xE0, 0x0, 0xC0, 0x0, 0x0, 0x0, 0xC0, 0x0, 0x20, 0x0, 0xC0, 0x0, 0x40, 0x0, 0xC0, 0x0, 0x60, 0x0, 0xC0, 0x0, 0x80, 0x0, 0xC0, 0x0, 0xA0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xC0, 0x0, 0xE0, 0x0, 0xC0, 0x20, 0x0, 0x0, 0xC0, 0x20, 0x20, 0x0, 0xC0, 0x20, 0x40, 0x0, 0xC0, 0x20, 0x60, 0x0, 0xC0, 0x20, 0x80, 0x0, 0xC0, 0x20, 0xA0, 0x0, 0xC0, 0x20, 0xC0, 0x0, 0xC0, 0x20, 0xE0, 0x0, 0xC0, 0x40, 0x0, 0x0, 0xC0, 0x40, 0x20, 0x0, 0xC0, 0x40, 0x40, 0x0, 0xC0, 0x40, 0x60, 0x0, 0xC0, 0x40, 0x80, 0x0, 0xC0, 0x40, 0xA0, 0x0, 0xC0, 0x40, 0xC0, 0x0, 0xC0, 0x40, 0xE0, 0x0, 0xC0, 0x60, 0x0, 0x0, 0xC0, 0x60, 0x20, 0x0, 0xC0, 0x60, 0x40, 0x0, 0xC0, 0x60, 0x60, 0x0, 0xC0, 0x60, 0x80, 0x0, 0xC0, 0x60, 0xA0, 0x0, 0xC0, 0x60, 0xC0, 0x0, 0xC0, 0x60, 0xE0, 0x0, 0xC0, 0x80, 0x0, 0x0, 0xC0, 0x80, 0x20, 0x0, 0xC0, 0x80, 0x40, 0x0, 0xC0, 0x80, 0x60, 0x0, 0xC0, 0x80, 0x80, 0x0, 0xC0, 0x80, 0xA0, 0x0, 0xC0, 0x80, 0xC0, 0x0, 0xC0, 0x80, 0xE0, 0x0, 0xC0, 0xA0, 0x0, 0x0, 0xC0, 0xA0, 0x20, 0x0, 0xC0, 0xA0, 0x40, 0x0, 0xC0, 0xA0, 0x60, 0x0, 0xC0, 0xA0, 0x80, 0x0, 0xC0, 0xA0, 0xA0, 0x0, 0xC0, 0xA0, 0xC0, 0x0, 0xC0, 0xA0, 0xE0, 0x0, 0xC0, 0xC0, 0x0, 0x0, 0xC0, 0xC0, 0x20, 0x0, 0xC0, 0xC0, 0x40, 0x0, 0xC0, 0xC0, 0x60, 0x0, 0xC0, 0xC0, 0x80, 0x0, 0xC0, 0xC0, 0xA0, 0x0, 0xF0, 0xFB, 0xFF, 0x0, 0xA4, 0xA0, 0xA0, 0x0, 0x80, 0x80, 0x80, 0x0, 0x0, 0x0, 0xFF, 0x0, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0xFF, 0x0, 0xFF, 0x0, 0x0, 0x0, 0xFF, 0x0, 0xFF, 0x0, 0xFF, 0xFF, 0x0, 0x0, 0xFF, 0xFF, 0xFF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x7, 0x4F, 0x4F, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x7, 0x4F, 0x4F, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 
};

const UINT8 BombStringRestart[]="START";
const UINT8 BombStringClose[]="CLOSE";
const UINT8 Bomb0[]="0";
const UINT8 Bomb1[]="1";
const UINT8 Bomb2[]="2";
const UINT8 Bomb3[]="3";
const UINT8 Bomb4[]="4";
const UINT8 Bomb5[]="5";
const UINT8 Bomb6[]="6";
const UINT8 Bomb7[]="7";
const UINT8 Bomb8[]="8";
const UINT8 Bomb9[]="9";

const UINT8 BombPattern[10][25]={
{0,0,0,0,0,
0,0,0,0,0,
0,0,1,0,0,
0,0,0,1,0,
0,0,1,0,0,
},
{0,0,0,1,0,
0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
0,1,0,0,0,
},
{0,0,0,0,0,
0,1,0,0,0,
0,0,0,0,0,
0,0,0,1,0,
0,0,0,0,0,
},
{0,0,0,0,0,
0,0,0,0,0,
0,1,0,0,0,
0,0,0,0,0,
0,0,0,0,1,
},
{0,0,0,0,0,
0,0,0,1,0,
0,0,0,0,0,
0,0,0,0,0,
0,1,0,0,0,
},
{0,0,0,0,1,
0,0,0,0,0,
0,0,0,0,0,
0,0,1,1,0,
0,0,1,1,0,
},
{0,0,0,1,1,
0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
},
{0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
0,0,1,0,0,
0,0,1,0,0,
},
{0,0,0,0,0,
0,0,0,0,0,
1,1,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
},
{0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,0,
0,0,0,0,1,
},
};

VOID BombInit(BOMB_CONTROL *pBomb){
	UINT8 i,j,k;
	
    //setup buttons
    pBomb->RestartButton.Type=WINDOW_BUTTON_PUSHBUTTON;
    pBomb->RestartButton.Status=WINDOW_BUTTON_RELEASE;
    pBomb->RestartButton.Active=TRUE;
    pBomb->RestartButton.Dirty=TRUE;
    pBomb->RestartButton.Outline=TRUE;
    pBomb->RestartButton.pName=(UINT8*)BombStringRestart;
    pBomb->RestartButton.pBitmap=(UINT8 *)NULL;
    pBomb->RestartButton.ReleaseGfx.BgColor=GFX_COLOR_GREEN;
    pBomb->RestartButton.ReleaseGfx.FgColor=GFX_COLOR_GREEN;
    pBomb->RestartButton.ReleaseGfx.FontColor=GFX_COLOR_WHITE;
    pBomb->RestartButton.PressGfx.BgColor=GFX_COLOR_GREEN0;
    pBomb->RestartButton.PressGfx.FgColor=GFX_COLOR_GREEN0;
    pBomb->RestartButton.PressGfx.FontColor=GFX_COLOR_WHITE;
    pBomb->RestartButton.InactiveGfx.BgColor=GFX_COLOR_LIGHTGRAY;
    pBomb->RestartButton.InactiveGfx.FgColor=GFX_COLOR_LIGHTGRAY;
    pBomb->RestartButton.InactiveGfx.FontColor=GFX_COLOR_BLUE;
    pBomb->RestartButton.Area.X=0;
    pBomb->RestartButton.Area.Y=2;
    pBomb->RestartButton.Area.W=62;
    pBomb->RestartButton.Area.H=10+4;
	pBomb->WdRestartButton.Type=WINDOW_DEVICE_BUTTON;
	pBomb->WdRestartButton.DeviceNumberLeft=BOMB_WDN_RESTARTBUTTON;
	pBomb->WdRestartButton.DeviceNumberMiddle=WINDOW_WDN_NULL;
	pBomb->WdRestartButton.DeviceNumberRight=WINDOW_WDN_NULL;
	pBomb->WdRestartButton.pDevice=(UINT32 *)(&pBomb->RestartButton);

    pBomb->CloseButton.Type=WINDOW_BUTTON_PUSHBUTTON;
    pBomb->CloseButton.Status=WINDOW_BUTTON_RELEASE;
    pBomb->CloseButton.Active=TRUE;
    pBomb->CloseButton.Dirty=TRUE;
    pBomb->CloseButton.Outline=TRUE;
    pBomb->CloseButton.pName=(UINT8*)BombStringClose;
    pBomb->CloseButton.pBitmap=(UINT8 *)NULL;
    pBomb->CloseButton.ReleaseGfx.BgColor=GFX_COLOR_GREEN;
    pBomb->CloseButton.ReleaseGfx.FgColor=GFX_COLOR_GREEN;
    pBomb->CloseButton.ReleaseGfx.FontColor=GFX_COLOR_WHITE;
    pBomb->CloseButton.PressGfx.BgColor=GFX_COLOR_GREEN0;
    pBomb->CloseButton.PressGfx.FgColor=GFX_COLOR_GREEN0;
    pBomb->CloseButton.PressGfx.FontColor=GFX_COLOR_WHITE;
    pBomb->CloseButton.InactiveGfx.BgColor=GFX_COLOR_LIGHTGRAY;
    pBomb->CloseButton.InactiveGfx.FgColor=GFX_COLOR_LIGHTGRAY;
    pBomb->CloseButton.InactiveGfx.FontColor=GFX_COLOR_BLUE;
    pBomb->CloseButton.Area.X=68;
    pBomb->CloseButton.Area.Y=2;
    pBomb->CloseButton.Area.W=62;
    pBomb->CloseButton.Area.H=10+4;
	pBomb->WdCloseButton.Type=WINDOW_DEVICE_BUTTON;
	pBomb->WdCloseButton.DeviceNumberLeft=BOMB_WDN_CLOSEBUTTON;
	pBomb->WdCloseButton.DeviceNumberMiddle=WINDOW_WDN_NULL;
	pBomb->WdCloseButton.DeviceNumberRight=WINDOW_WDN_NULL;
	pBomb->WdCloseButton.pDevice=(UINT32 *)(&pBomb->CloseButton);

    j=0;
    k=0;
    for(i=0;i<25;i++){
	    pBomb->BombButton[i].Type=WINDOW_BUTTON_PUSHBUTTON;
	    pBomb->BombButton[i].Status=WINDOW_BUTTON_RELEASE;
	    pBomb->BombButton[i].Active=TRUE;
        pBomb->BombButton[i].Dirty=TRUE;
	    pBomb->BombButton[i].Outline=TRUE;
	    pBomb->BombButton[i].pName=(UINT8 *)NULL;
	    pBomb->BombButton[i].pBitmap=(UINT8 *)NULL;
	    pBomb->BombButton[i].ReleaseGfx.BgColor=GFX_COLOR_GREEN;
	    pBomb->BombButton[i].ReleaseGfx.FgColor=GFX_COLOR_GREEN;
	    pBomb->BombButton[i].ReleaseGfx.FontColor=GFX_COLOR_WHITE;
	    pBomb->BombButton[i].PressGfx.BgColor=GFX_COLOR_GREEN0;
	    pBomb->BombButton[i].PressGfx.FgColor=GFX_COLOR_GREEN0;
	    pBomb->BombButton[i].PressGfx.FontColor=GFX_COLOR_WHITE;
	    pBomb->BombButton[i].InactiveGfx.BgColor=GFX_COLOR_LIGHTGRAY;
	    pBomb->BombButton[i].InactiveGfx.FgColor=GFX_COLOR_LIGHTGRAY;
	    pBomb->BombButton[i].InactiveGfx.FontColor=GFX_COLOR_BLUE;
	    pBomb->BombButton[i].Area.X=0+26*j;
	    pBomb->BombButton[i].Area.Y=26+26*k;
	    pBomb->BombButton[i].Area.W=26;
	    pBomb->BombButton[i].Area.H=26;
	    j++;
	    if(j==5){
	        j=0;
	    	k++;
	    }
		pBomb->WdBombButton[i].Type=WINDOW_DEVICE_BUTTON;
		pBomb->WdBombButton[i].DeviceNumberLeft=BOMB_WDN_BUTTON0+i;
	    pBomb->WdBombButton[i].DeviceNumberMiddle=WINDOW_WDN_NULL;
	    pBomb->WdBombButton[i].DeviceNumberRight=BOMB_WDN_BUTTON25+i;
		pBomb->WdBombButton[i].pDevice=(UINT32 *)(&pBomb->BombButton[i]);
    }
    
    pBomb->UserTable.Type=WINDOW_TABLE_GENERAL;
    pBomb->UserTable.DeviceList=(WINDOW_DEVICE *)NULL;
    pBomb->UserTable.Gfx.BgColor=GFX_COLOR_LIGHTBLUE;
    pBomb->UserTable.Gfx.FgColor=GFX_COLOR_LIGHTBLUE;
    pBomb->UserTable.Gfx.FontColor=GFX_COLOR_WHITE;
    pBomb->UserTable.Area.X=0;
    pBomb->UserTable.Area.Y=0;
    pBomb->UserTable.Area.W=130;
    pBomb->UserTable.Area.H=155+15+10;
    DeskTableWindowDeviceAdd(&pBomb->UserTable,&pBomb->WdRestartButton);
    DeskTableWindowDeviceAdd(&pBomb->UserTable,&pBomb->WdCloseButton);
    for(i=0;i<25;i++) DeskTableWindowDeviceAdd(&pBomb->UserTable,&pBomb->WdBombButton[i]);

    WindowVariableInit(&pBomb->Window,WINDOW_TYPE_APPLICATION);
    pBomb->Window.pTitle=(UINT8 *)BombTaskName;   
    DeskTableUserTableAdd(&pBomb->Window,&pBomb->UserTable);
    WindowAreaInitial(&pBomb->Window);
    WindowOutlineCalculate(&pBomb->Window);
    WindowOutlineTableInitial(&pBomb->Window);
    WindowHeaderCalculate(&pBomb->Window);
    WindowHeaderTableInitial(&pBomb->Window);

    DeskWindowWindowPut((WINDOW *)&pBomb->Window);
    ((OS_TCB *)OsTaskCurrent)->Window=(UINT32)&pBomb->Window;      
    pBomb->CurrentPattern=RootTaskRandomNumberGet()%10;      
    pBomb->PreviousPattern=pBomb->CurrentPattern;
    CaptionUINT8Print(&DeskDebugCtrl.Caption,pBomb->CurrentPattern);              
	pBomb->TaskState=BombTaskRunState; 
}

VOID BombSvc(BOMB_CONTROL *pBomb){
    if(WindowEventBufferCheck(&pBomb->Window)!=BUFFER_EMPTY){ // handle event buffer
    	pBomb->WindowEvent=WindowEventBufferGet(&pBomb->Window);
	    #if(DEBUG_BOMB==1)		    
            CaptionStringPrint(&DeskDebugCtrl.Caption,"\nbomb");                            
            CaptionUINT8Print(&DeskDebugCtrl.Caption,(UINT8)pBomb->WindowEvent);
	    #endif
        BombEventHandler(pBomb);
    }
}

VOID BombEventHandler(BOMB_CONTROL *pBomb){
    switch((UINT8)pBomb->WindowEvent){
    	case BOMB_WDN_BUTTON0:
    	    if(BombPattern[pBomb->CurrentPattern][0]==0x01) BombBombHit(pBomb,0);
    	    else BombBombOpen(pBomb,0);
    	    break;
    	case BOMB_WDN_BUTTON1:
    	    if(BombPattern[pBomb->CurrentPattern][1]==0x01) BombBombHit(pBomb,1);
    	    else BombBombOpen(pBomb,1);
    	    break;
    	case BOMB_WDN_BUTTON2:
    	    if(BombPattern[pBomb->CurrentPattern][2]==0x01) BombBombHit(pBomb,2);
    	    else BombBombOpen(pBomb,2);
    	    break;
    	case BOMB_WDN_BUTTON3:
    	    if(BombPattern[pBomb->CurrentPattern][3]==0x01) BombBombHit(pBomb,3);
    	    else BombBombOpen(pBomb,3);
    	    break;
    	case BOMB_WDN_BUTTON4:
    	    if(BombPattern[pBomb->CurrentPattern][4]==0x01) BombBombHit(pBomb,4);
    	    else BombBombOpen(pBomb,4);
    	    break;
    	case BOMB_WDN_BUTTON5:
    	    if(BombPattern[pBomb->CurrentPattern][5]==0x01) BombBombHit(pBomb,5);
    	    else BombBombOpen(pBomb,5);
    	    break;
    	case BOMB_WDN_BUTTON6:
    	    if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombBombHit(pBomb,6);
    	    else BombBombOpen(pBomb,6);
    	    break;
    	case BOMB_WDN_BUTTON7:
    	    if(BombPattern[pBomb->CurrentPattern][7]==0x01) BombBombHit(pBomb,7);
    	    else BombBombOpen(pBomb,7);
    	    break;
    	case BOMB_WDN_BUTTON8:
    	    if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombBombHit(pBomb,8);
    	    else BombBombOpen(pBomb,8);
    	    break;
    	case BOMB_WDN_BUTTON9:
    	    if(BombPattern[pBomb->CurrentPattern][9]==0x01) BombBombHit(pBomb,9);
    	    else BombBombOpen(pBomb,9);
    	    break;
    	case BOMB_WDN_BUTTON10:
    	    if(BombPattern[pBomb->CurrentPattern][10]==0x01) BombBombHit(pBomb,10);
    	    else BombBombOpen(pBomb,10);
    	    break;
    	case BOMB_WDN_BUTTON11:
    	    if(BombPattern[pBomb->CurrentPattern][11]==0x01) BombBombHit(pBomb,11);
    	    else BombBombOpen(pBomb,11);
    	    break;
    	case BOMB_WDN_BUTTON12:
    	    if(BombPattern[pBomb->CurrentPattern][12]==0x01) BombBombHit(pBomb,12);
    	    else BombBombOpen(pBomb,12);
    	    break;
    	case BOMB_WDN_BUTTON13:
    	    if(BombPattern[pBomb->CurrentPattern][13]==0x01) BombBombHit(pBomb,13);
    	    else BombBombOpen(pBomb,13);
    	    break;
    	case BOMB_WDN_BUTTON14:
    	    if(BombPattern[pBomb->CurrentPattern][14]==0x01) BombBombHit(pBomb,14);
    	    else BombBombOpen(pBomb,14);
    	    break;
    	case BOMB_WDN_BUTTON15:
    	    if(BombPattern[pBomb->CurrentPattern][15]==0x01) BombBombHit(pBomb,15);
    	    else BombBombOpen(pBomb,15);
    	    break;
    	case BOMB_WDN_BUTTON16:
    	    if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombBombHit(pBomb,16);
    	    else BombBombOpen(pBomb,16);
    	    break;
    	case BOMB_WDN_BUTTON17:
    	    if(BombPattern[pBomb->CurrentPattern][17]==0x01) BombBombHit(pBomb,17);
    	    else BombBombOpen(pBomb,17);
    	    break;
    	case BOMB_WDN_BUTTON18:
    	    if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombBombHit(pBomb,18);
    	    else BombBombOpen(pBomb,18);
    	    break;
    	case BOMB_WDN_BUTTON19:
    	    if(BombPattern[pBomb->CurrentPattern][19]==0x01) BombBombHit(pBomb,19);
    	    else BombBombOpen(pBomb,19);
    	    break;
    	case BOMB_WDN_BUTTON20:
    	    if(BombPattern[pBomb->CurrentPattern][20]==0x01) BombBombHit(pBomb,20);
    	    else BombBombOpen(pBomb,20);
    	    break;
    	case BOMB_WDN_BUTTON21:
    	    if(BombPattern[pBomb->CurrentPattern][21]==0x01) BombBombHit(pBomb,21);
    	    else BombBombOpen(pBomb,21);
    	    break;
    	case BOMB_WDN_BUTTON22:
    	    if(BombPattern[pBomb->CurrentPattern][22]==0x01) BombBombHit(pBomb,22);
    	    else BombBombOpen(pBomb,22);
    	    break;
    	case BOMB_WDN_BUTTON23:
    	    if(BombPattern[pBomb->CurrentPattern][23]==0x01) BombBombHit(pBomb,23);
    	    else BombBombOpen(pBomb,23);
    	    break;
    	case BOMB_WDN_BUTTON24:
    	    if(BombPattern[pBomb->CurrentPattern][24]==0x01) BombBombHit(pBomb,24);
    	    else BombBombOpen(pBomb,24);
    	    break;
    	    
    	case BOMB_WDN_BUTTON25:
    	    BombBombMark(pBomb,0);
    	    break;
    	case BOMB_WDN_BUTTON26:
    	    BombBombMark(pBomb,1);
    	    break;
    	case BOMB_WDN_BUTTON27:
    	    BombBombMark(pBomb,2);
    	    break;
    	case BOMB_WDN_BUTTON28:
    	    BombBombMark(pBomb,3);
    	    break;
    	case BOMB_WDN_BUTTON29:
    	    BombBombMark(pBomb,4);
    	    break;
    	case BOMB_WDN_BUTTON30:
    	    BombBombMark(pBomb,5);
    	    break;
    	case BOMB_WDN_BUTTON31:
    	    BombBombMark(pBomb,6);
    	    break;
    	case BOMB_WDN_BUTTON32:
    	    BombBombMark(pBomb,7);
    	    break;
    	case BOMB_WDN_BUTTON33:
    	    BombBombMark(pBomb,8);
    	    break;
    	case BOMB_WDN_BUTTON34:
    	    BombBombMark(pBomb,9);
    	    break;
    	case BOMB_WDN_BUTTON35:
    	    BombBombMark(pBomb,10);
    	    break;
    	case BOMB_WDN_BUTTON36:
    	    BombBombMark(pBomb,11);
    	    break;
    	case BOMB_WDN_BUTTON37:
    	    BombBombMark(pBomb,12);
    	    break;
    	case BOMB_WDN_BUTTON38:
    	    BombBombMark(pBomb,13);
    	    break;
    	case BOMB_WDN_BUTTON39:
    	    BombBombMark(pBomb,14);
    	    break;
    	case BOMB_WDN_BUTTON40:
    	    BombBombMark(pBomb,15);
    	    break;
    	case BOMB_WDN_BUTTON41:
    	    BombBombMark(pBomb,16);
    	    break;
    	case BOMB_WDN_BUTTON42:
    	    BombBombMark(pBomb,17);
    	    break;
    	case BOMB_WDN_BUTTON43:
    	    BombBombMark(pBomb,18);
    	    break;
    	case BOMB_WDN_BUTTON44:
    	    BombBombMark(pBomb,19);
    	    break;
    	case BOMB_WDN_BUTTON45:
    	    BombBombMark(pBomb,20);
    	    break;
    	case BOMB_WDN_BUTTON46:
    	    BombBombMark(pBomb,21);
    	    break;
    	case BOMB_WDN_BUTTON47:
    	    BombBombMark(pBomb,22);
    	    break;
    	case BOMB_WDN_BUTTON48:
    	    BombBombMark(pBomb,23);
    	    break;
    	case BOMB_WDN_BUTTON49:
    	    BombBombMark(pBomb,24);
    	    break;
    	case BOMB_WDN_RESTARTBUTTON:
    	    BombRestart(pBomb);
    	    break;
    	case BOMB_WDN_CLOSEBUTTON:
            DeskWindowWindowDelete((WINDOW *)((OS_TCB *)OsTaskCurrent)->Window);
    	    pBomb->State=BombCloseState;
    	    break;
    	default:
    	    break;
    }
}

VOID BombBombOpen(BOMB_CONTROL *pBomb,UINT8 BombNumber){
	UINT8 BombCounter;
	
	BombCounter=BombBombCalculate(pBomb,BombNumber);
    if(BombCounter==0) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb0;
    else if(BombCounter==1) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb1;
    else if(BombCounter==2) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb2;
    else if(BombCounter==3) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb3;
    else if(BombCounter==4) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb4;
    else if(BombCounter==5) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb5;
    else if(BombCounter==6) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb6;
    else if(BombCounter==7) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb7;
    else if(BombCounter==8) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb8;
    else if(BombCounter==9) pBomb->BombButton[BombNumber].pName=(UINT8*)Bomb9;
    pBomb->BombButton[BombNumber].Active=FALSE;
    pBomb->BombButton[BombNumber].Dirty=TRUE;
}

VOID BombBombHit(BOMB_CONTROL *pBomb,UINT8 BombNumber){
	UINT8 BombNumber2,BombCounter;
	
    for(BombNumber2=0;BombNumber2<25;BombNumber2++){
    	if(BombNumber2==BombNumber){
    		pBomb->BombButton[BombNumber2].pName=(UINT8 *)NULL;
            pBomb->BombButton[BombNumber2].pBitmap=(UINT8*)BombExplore;
            pBomb->BombButton[BombNumber2].Active=FALSE;
            pBomb->BombButton[BombNumber2].Dirty=TRUE;
	        pBomb->BombButton[BombNumber2].InactiveGfx.FontColor=GFX_COLOR_RED;
	        continue;
    	}
        BombCounter=BombBombCalculate(pBomb,BombNumber2);
        if(BombCounter==0) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb0;
        else if(BombCounter==1) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb1;
        else if(BombCounter==2) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb2;
        else if(BombCounter==3) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb3;
        else if(BombCounter==4) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb4;
        else if(BombCounter==5) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb5;
        else if(BombCounter==6) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb6;
        else if(BombCounter==7) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb7;
        else if(BombCounter==8) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb8;
        else if(BombCounter==9) pBomb->BombButton[BombNumber2].pName=(UINT8*)Bomb9;

        if(BombPattern[pBomb->CurrentPattern][BombNumber2]==0x01){
	        pBomb->BombButton[BombNumber2].pName=(UINT8 *)NULL;
	        pBomb->BombButton[BombNumber2].pBitmap=(UINT8*)BombBomb;
        }
        pBomb->BombButton[BombNumber2].Active=FALSE;
        pBomb->BombButton[BombNumber2].Dirty=TRUE;
    }
}

UINT8 BombBombCalculate(BOMB_CONTROL *pBomb,UINT8 BombNumber){
	UINT8 BombCounter;
	
	BombCounter=0;
	if(BombNumber==0){
		if(BombPattern[pBomb->CurrentPattern][0]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][1]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][5]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombCounter++;
	}
	else if(BombNumber==1){
		if(BombPattern[pBomb->CurrentPattern][0]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][1]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][2]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][5]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][7]==0x01) BombCounter++;
	}
	else if(BombNumber==2){
		if(BombPattern[pBomb->CurrentPattern][1]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][2]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][3]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][7]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombCounter++;
	}
	else if(BombNumber==3){
		if(BombPattern[pBomb->CurrentPattern][2]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][3]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][4]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][7]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][9]==0x01) BombCounter++;
	}
	else if(BombNumber==4){
		if(BombPattern[pBomb->CurrentPattern][3]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][4]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][9]==0x01) BombCounter++;
	}
	else if(BombNumber==5){
		if(BombPattern[pBomb->CurrentPattern][0]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][1]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][5]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][10]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][11]==0x01) BombCounter++;
	}
	else if(BombNumber==9){
		if(BombPattern[pBomb->CurrentPattern][3]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][4]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][9]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][13]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][14]==0x01) BombCounter++;
	}
	else if(BombNumber==10){
		if(BombPattern[pBomb->CurrentPattern][5]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][6]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][10]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][11]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][15]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombCounter++;
	}
	else if(BombNumber==14){
		if(BombPattern[pBomb->CurrentPattern][8]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][9]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][13]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][14]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][19]==0x01) BombCounter++;
	}
	else if(BombNumber==15){
		if(BombPattern[pBomb->CurrentPattern][10]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][11]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][15]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][20]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][21]==0x01) BombCounter++;
	}
	else if(BombNumber==19){
		if(BombPattern[pBomb->CurrentPattern][13]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][14]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][19]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][23]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][24]==0x01) BombCounter++;
	}
	else if(BombNumber==20){
		if(BombPattern[pBomb->CurrentPattern][15]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][20]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][21]==0x01) BombCounter++;
	}
	else if(BombNumber==21){
		if(BombPattern[pBomb->CurrentPattern][15]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][17]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][20]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][21]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][22]==0x01) BombCounter++;
	}
	else if(BombNumber==22){
		if(BombPattern[pBomb->CurrentPattern][16]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][17]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][21]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][22]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][23]==0x01) BombCounter++;
	}
	else if(BombNumber==23){
		if(BombPattern[pBomb->CurrentPattern][17]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][19]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][22]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][23]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][24]==0x01) BombCounter++;
	}
	else if(BombNumber==24){
		if(BombPattern[pBomb->CurrentPattern][18]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][19]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][23]==0x01) BombCounter++;
		if(BombPattern[pBomb->CurrentPattern][24]==0x01) BombCounter++;
	}
    else{
	    if((BombNumber-6)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber-6]==0x01) BombCounter++;
	    if((BombNumber-5)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber-5]==0x01) BombCounter++;
	    if((BombNumber-4)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber-4]==0x01) BombCounter++;
	    if((BombNumber-1)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber-1]==0x01) BombCounter++;
	    if((BombNumber+6)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber+6]==0x01) BombCounter++;
	    if((BombNumber+5)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber+5]==0x01) BombCounter++;
	    if((BombNumber+4)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber+4]==0x01) BombCounter++;
	    if((BombNumber+1)>=0) if(BombPattern[pBomb->CurrentPattern][BombNumber+1]==0x01) BombCounter++;
    }
	return BombCounter;
}

VOID BombRestart(BOMB_CONTROL *pBomb){
	UINT8 i;
	
	pBomb->CurrentPattern=RootTaskRandomNumberGet()%10;
	if(pBomb->CurrentPattern==pBomb->PreviousPattern){
		pBomb->CurrentPattern++;
		pBomb->CurrentPattern=pBomb->CurrentPattern%10;
	}  
    pBomb->PreviousPattern=pBomb->CurrentPattern;
    for(i=0;i<25;i++){
	    pBomb->BombButton[i].Type=WINDOW_BUTTON_PUSHBUTTON;
	    pBomb->BombButton[i].Status=WINDOW_BUTTON_RELEASE;
	    pBomb->BombButton[i].Active=TRUE;
        pBomb->BombButton[i].Dirty=TRUE;
	    pBomb->BombButton[i].Outline=TRUE;
	    pBomb->BombButton[i].pName=(UINT8 *)NULL;
	    pBomb->BombButton[i].pBitmap=(UINT8 *)NULL;
	    pBomb->BombButton[i].ReleaseGfx.BgColor=GFX_COLOR_GREEN;
	    pBomb->BombButton[i].ReleaseGfx.FgColor=GFX_COLOR_GREEN;
	    pBomb->BombButton[i].ReleaseGfx.FontColor=GFX_COLOR_WHITE;
	    pBomb->BombButton[i].PressGfx.BgColor=GFX_COLOR_GREEN0;
	    pBomb->BombButton[i].PressGfx.FgColor=GFX_COLOR_GREEN0;
	    pBomb->BombButton[i].PressGfx.FontColor=GFX_COLOR_WHITE;
	    pBomb->BombButton[i].InactiveGfx.BgColor=GFX_COLOR_LIGHTGRAY;
	    pBomb->BombButton[i].InactiveGfx.FgColor=GFX_COLOR_LIGHTGRAY;
	    pBomb->BombButton[i].InactiveGfx.FontColor=GFX_COLOR_BLUE;
    }
}

VOID BombBombMark(BOMB_CONTROL *pBomb,UINT8 BombNumber){
	if(pBomb->BombButton[BombNumber].pBitmap==(UINT8 *)NULL){
		pBomb->BombButton[BombNumber].pBitmap=(UINT8 *)BombFlag;
		pBomb->BombButton[BombNumber].ReleaseGfx.FontColor=GFX_COLOR_RED;
        pBomb->BombButton[BombNumber].Dirty=TRUE;
	}
	else{
		pBomb->BombButton[BombNumber].pBitmap=(UINT8 *)NULL;
		pBomb->BombButton[BombNumber].ReleaseGfx.FontColor=GFX_COLOR_WHITE;
        pBomb->BombButton[BombNumber].Dirty=TRUE;
	}
}


